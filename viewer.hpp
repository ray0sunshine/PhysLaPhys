/*
                                                                                                                         .+`                                                                            
                                                                                                                         oh`                                                                            
                                                                                                                        -yh-                                                                            
                                                                                                                       `oyh/                                                                            
                                     `                                                                                 -hyy+                                                                            
                                     -o.                                                                               oyyyy                                                                            
                                      :h/`                                                                            :yyyyh`                                                                           
                                       /hs-                                                                          `syyyyh`                                                                           
                                       `ohy/`                                                                        :hyyyyh.                                                                           
                                        `syyy-                                                                       syyyyyh:                                                                           
                                         .syyy+`                                                                    :hyyyyyh:                                                                           
                                          .yyyys:                                                                   ohyyyyyh:                                                                           
                                           :hyyyy+.                                                                .dhyyyyyy/                                                                           
                                            :hyyyyy:                                                               +dhyyyyyy+                                                                           
                                             +hyyyyy+`                                                            `hdhyyyyyy+                                                                           
                                             `ohyyyyys:                                                           :dhhyyyyyy+                                                                           
                                              `syyyyyyyo.                                                         oddhyyyyyy+                                                                           
                                               .yhyyyyyyy:`                                                      `hddhyyyyyy+                                                                           
                                                .ddyyyyyyyo`                                                     .mddhyyyyyys`                                                                          
                                                 :ddhyyyyyyy/`                                                   /mhdhyyyyyyy.                                                                          
                                                  -ddhhyyyyyyo-                                                  odddhyyyyyyh-                                                                          
                                                   /dddhyyyyyyy/`                                               `hdddyyyyyyyh:                                                                          
                                                    :mddhhyyyyyyo-                                              -dhddyyyyyyyy/                                                                          
                                                     +mdddhyyyyyyy/`                                            /ddddyyyyyyyyy                                                                          
                                                      /mdddhhyyyyyys:`                                          sdddhyyyyyyyyy`                                                                         
                                                       +dddddhyyyyyyyo-                                        .ddddhyyyyyyysy.                                                                         
                                                        /mdddddhyyyyyyy/`                                      +mhddhyyyyyyyyy:                                                                         
                                                         +ddddddhyyyyyyys:`                                   `hddddhyyyyyyyyy/                                                                         
                                                          +dddddddhyyyyyyys-`                                 :mhdddhyyyyyyyyy+                                                                         
                                                           :hddddddhyyyyyyyyo.                                odddddhyyyyyyyyyo                                                                         
                                                            .yddddddhyyyyyyyyy/`                             `ydddddhyyyyyyyyyo                                                                         
                                                             `+dddddddhyyyyyyyys-                            .mdddddhyyyyyyyyho                                                                         
                                                               :hddddddhyyyyyyyyy+`                          /mhddddhyyyyyyysd+                                                                         
                                                                `odddddddhyyyyyyyyy-                        `yddddddhyyyyyyyyd-                                                                         
                                                                  -yddddddhyyyyyyyyy-                       .dddddddhyyyyyyyyy`                                                                         
                                                                   `+dddddddhyyyyyyyy:                     `/dddddddhyyyyyyyh/                                                                          
                                                                  ./ydmmdhdddhyyyyyyyhdso/-.         `.:+syhdmmdddddhyyyyyyyh-                                                                          
                                                              `.+ydddddmNmddddhyyyyyyydNNNNmdhso+osyhddddddddmNNddddhyyyyyyys`                                                                          
                                                          `./shddddddddddmNNddddhyyyyyyhNNNNNNNNNNNmmmmmmmNNNNNNmdddhyyyyyyys`                                                                          
                                                      `-+yhddddddddddddddddmNNdddhyyyyyyhNNNNNNNNNNNNNNNNNNNNNNNNmhdhyyyyyydmho.                                                                        
                                                `.:+shddddddddddddddddddddddmNNNddhyyyyyyymy++//++dNNNNNNNNNNNNNNNddhyyyyyymddddy+-`                                                                    
                                      .-::/++oshdhyhdmddddddddddddddddddddddddmNNNddhyyyyyyd/--...+NNNNNNNNNNNNNNNmdhyyyyyhmdddddddhho+/:.                                                              
                         /syhhyyyysooommdddddddddmmdhyhdddddddddddddddddddddddddmNNmdhyyyyyydNmmmmmNNNNNNNNNNNNNNNNdhyyyyymdddddddddmdmdds...                                                           
                        odddddddddddddddmmmmmdddddddddddhhhhddddddddddddddddddddddmmNmdhyyyyydNNNNNNNNNNNNNNNNNNNNNmhyyyyymddddddddmdmddmmhddo`                                                         
                       -ddddddddddddddddddddddmmmmmddddddddddhhhhhdddddddddddddddddddmNmdyyyyydNNNNNNNNNNNNNNNNNNNNmhyyyydmddddddddmhmddNdddddo                                                         
                       +mdddddddddmmmmdddddddddddddmmmmmmddddddddddmdddddddddddddddddddmNmhyyyyhNNNNNNNNNNNNNNNNNNNNdyyyymddddddddmdmdddNdddddh                                                         
                       smdddddddddNNNNNmddddddddddddddddddNNNmmmddddddddddddmddhhhhddmmddmmmyyyyymNNNNNNNNNNNNNNNNNNdyyyhmdddddddmddmddNmdddddy                                                         
                       smdddddddddmNNNNNmdddddddddddddddddmNmNNNNNNNNmmdddddddddddddhyhdmdddmdhyyydNNNNNNNNNNNNNNNNNmyyyddddddddmddmddmmdddddd+                                                         
                       smddddddddddmNNNNNmdddddddddddddddddNmmNNNNNNNNNNNNmmdddddddddmdhyydmddmdhyydNNNNNNNNNNNNNNNNmyyyNddddddmddmddmmddddddd-                                                         
                       +mdddddddddddmNNNNNmddddddddddddddddNNmmmNNmmmNmNNNNNNNmdddddddddmdhyhmddmdhyhmNNNNNNNNNNNNNNNyydmddddmddddddmmdddddddy`                                                         
                       :mdddddddddddddNNNNNmddddddddddddddddNmmmmmmmddmmNNmNNNNNmmddddddddddhyhdddmdyydNNNNNNNNNNNNNNyymdddmdhdddddmdmddddddd/                                                          
                       .dddddddddddddddmNNNNddddddddddddddddmNmmmmmmmmddddmmNNdhhhhdmmdddddddmdhhdddddhhNNNNNNNNNNNNNyhmdmhhdddddmdyymddddddm.                                                          
                       `sdddddddddddddddmNNNmddddddddddddddddNNmmmmmmmmmmdhhddhyyyyhmNNNmddddddddhhhmmmdhmNNNNNNNNNNNhmmdhddddddoodyhmddddddh`                                                          
                        /mdddddddddddddddmNNNmdddddddddddddddmNmmmmmmmmmmmmdhyyyyyhmNNNNNNNmddddddmdhhdmmdmNNNNNNNNNNdmhddddddmo.shydddddddds                                                           
                        `hddddddddddddddddmNNmddddddddddddddddmNmmmmmmmmmmNdyyyhhhhhhhdmmNNNNNmmdddddddhdmmmNNNNNNNNNNmdddmmdyy-+hyhmddddddd+                                                           
                         /mddddddddddddddddmNNmddddddddddddddddmNmmmmmmmmNdyyhdmmmmmddhhhhhdmmNNNmmddddmdddmmNNNNNNNNNddmdhhyy-/yoyNdddddddd:                                                           
                         .hdddddddddddddddddmNNdddddddddddddddddmNmmmmmmNmhhmmmmmmmmmmmmmmddddddmmNNNmmdddmmmmNNNNNNMmmo:////-:s-/mmdddddddh.                                                           
                          /mdddddddddddddddddmNmdddddddddddddddddmNmmmmNNhmNmmmmmmmmmmmmmmmmmmmmmmmNNNNNNNmmmmmNNMNNMmdsssssyyhsymNddddddddy                                                            
                          `yddddddddddddddddddmNdddddddddddddddddddNNmmNNmmmmmmmmmmmmmmmmmmmmmmmmmmmmNNNNNmmmmmmmNNNNhhhhhhhhhhddmmdddddddd+                                                            
                           -ddddddddddddddddddddmdddddddddddddddddddNNmNNmmmmmmmmmmmmmmmmmmmmmmmNNNNNmmdddddddddddmmddddddddddddmmddddddddd:                                                            
                            oddddddddddddddddddddmdddddddddddddddddmNmmmmmmNmmmmmmmmmmNNNNNNNNmmmmddddddddddddddddddddddddddddddmdddddddddm-                                                            
                          `-oNNNNmddddddddddddddddmdddddddddddddddmNmmmmmNmmmmmmmmmmmmmmmmdddddddddddddddddddddddddddddddddddddmddddddddddm.                                                            
                      `-/oyddmNNNNNmmddddddddddddddddddddddddddddmNmmmmNmdddddddddddddddddddddddddddddddddddddddddddddddddddddmmddddddddddm`                                                            
                    `+hdddddddmNNNNNNmmddddddddddmddddddddddddddNNmmmNNmddddddddddddddddddddddddddddddddddddddddddddddddddddddmmddddddddddd`                                                            
                    -mdddddddddNNNNNNNNNmddddddddNddddddddddddmNmmmmNmdddddddddddddddddddddddddddddddddddddddddddddddddddddddddmmdddddddddm`                                                            
                    `ydddddddddmNNNNNNNNNmmddddddNNdddddddddmNNmmmNmddddddddddddmmmmmddddddddddddddddddddddddyyyydmmmddddddddddmmdddddddddm-```                                                         
                     .hdddddddddmNNNNNNNNNNNmddddd+dddddddmNNmmNNmdddddddddddddddmhsyyyyyyydmdddddddmyssssso-`  :ddddddmdyyddddNNNmmmmmmdddhhd+                                                         
                      :ddddddddddmmNNNNNNNNNNNmddy`.ymddmNNmmNmmdmmdddddddddddddddddyoooooooydddddddmsooss.     :dddhys/.`ydddmNNNNNNNmmmddddd:                                                         
                       omddddddddddmmmmNNNNNmmmdm/  `smNNNNmmddddmsydddddddddddddddddoooooooooyhmdddmsoy/`      :s+:.    :dddhhddddddddddddddy`                                                         
                       `hdddddddddddddddddddddddN.   `+Nmddddddddmooooshhddddddddhysoooooooooooosyhhhoy:                 yddy.`sddddddddddddd-                                                          
                        odddddddddddddddddddddddy      +mddddddddmsooooooosyyssooooooooooooooooooooosy.                  oh/`  `ydddddddddddy                                                           
                        :mdddddddddddddddddddddd-       /mdddddddmsoooooooooooooooooooooooooooooooooh:                          `yddddddddddo                                                           
                        -mdddddddddddddddddddddy`        +mddddddNyooooooooooooooooooooooooooooooooh:                            .hddddddddd/                                                           
                        :mddddddddddddddddddddm-          omdddddmhoooooooooooooooooooooooooooooooho                              -ddddddddd/                                                           
                        :dddddddddddddddddddddh            sdddddmdoooooooooooooooooooooooooooooosy`                               /dddddddd+                                                           
                        /ddddddddddddddddddddm/            .ddddddmooooooooooooooooooooooooooooood:                                `smddddddy                                                           
                        oddddddddddddddddddddd.             :mddddNsooooooooooooooooooooooooooooyy                                  `yddddddm-                                                          
                       `hdddddddddddddddddddmo               oddddmyooooooooooooooooooooooooooooh/                                   .ddddddds                                                          
                       .ddddddddddddddddddddm.               `hdddddooooooooooooooooooooooooooood-                                    :ddddddd-                                                         
                       /mddddddddddddddddddms                 -mdddmsoooooooooooooooooooooooooood.                                     sddddddo                                                         
                       ydddddddddddddddddddm:                  sdddmsoooooooooooooooooooooooooooh`                                     .hdddddm.                                                        
                      .ddddddddddddddddddddh`                  .dddmhoooooooooooooooooooooooooooh`                                      odddddds                                                        
                      /dddddddddddddddddddm/                    oddmdoooooooooooooooooooooooooooy`                                      `ddddddd:                                                       
                      odddddddddddddddddddd`                    .dddmoooooooooooooooooooooooooooh`                                       +mdddddh`                                                      
                     .dddddddddddddddddddd+                     `yddmsooooooooooooooooooooooooooh-                                       -ddddddm/                                                      
                     :mddddddddddddddddddd.                      +ddmyooooooooooooooooooooooooooy:                                       `sddddddd-                                                     
                     oddddddddddddddddddms                       -ddmdooooooooooooooooooooooooooy+                                        -mddddddy                                                     
                    `hddddddddddddddddddm-                       `hddmsooooooooooooooooooooooooosy                                         yddddddm/                                                    
                    /dddddddddddddddddddd`                        yddmyooooooooooooooooooooooooooh.                                        /mddddddd-                                                   
                   `yddddddddddddddddddmo                         oddmdooooooooooooooooooooooooooso                                        .hdddddddh`                                                  
                   -dddddddddddddddddddm-                         omddmyooooooooooooooooooooooooooy.                                        omddddddmo`                                                 
                   sddddddddddddddddddmh`                         /mddddooooooooooooooooooooooooooy+                                        -mdddddddd:                                                 
                  .dddddddddddddddddddm+                          :mdddmyooooooooooooooooooooooooosd.                                        dddddddddd.                                                
                  /dddddddddddddddddddm-                          /mddddmsoooooooooooooooooooooooooys`                                       omddddddddy.                                               
                  sdddddddddddddddddddd`                          +mddddmdsoooooooooooooooooooooooooh/                                       -dddddddddds                                               
                 `hddddddddddddddddddds                           omdddddmdooooooooooooooooooooooooosh.                                      `ydddddddddd/                                              
                 .mdddddddddddddddddddo                           ydddddddmhoooooooooooooooooooooooooss`                                      +ddddddddddh:                                             
                 /mddddddddddddddddddm/                          .dddddddddmhoooooooooooooooooooooooooys`                                     .mddddddddddh`                                            
                 sdddddddddddddddddddm:                          /ddddddddddmdsooooooooooooooooooooooooyo`                                     hddddddddddd+                                            
                -ddddddddddddddddddddm:                          smddddddddddmdsooooooooooooooooooooooooys`                                    +mddddddddddd:                                           
                :mdddddddddddddddddddd.                        `:dmmdddddddddddmsooooooooooooosyysoooooooyo.                                   -ddddddddddddh`                                          
                /mdddddddddddddddddddm-                      `/ydddmmmddddddddddmhooooooooooshmdmdoooooooosy.                                  `ydddddddddddd/                                          
                smdddddddddddddddddddm:                    .oyddddddddmmmddddddddmdsoooooooymddddmyoooooooosh/`        -/`                      /mdddddddddddd-                                         
               `yddddddddddddddddddddm:                  -oddddddddNddddmNmddddddddmyooooohmddddddmsoooooooooyo.      /dds`                     .mddddddddddddy`                                        
               `hddddddddddddddddddddm/               `:sddddddddmNdddddmNNNmdddddddmdsooyNdddddddmhoooooooooosy/`   .hddd/                      sddddddddddddd+                                        
               .mddddddddddddddddddddm+            `.+hdddddddddmmddddddNNNddmmmddddddmhymdddddddddmooooooooooooys-` sddddy`                     /mddddddddddddd-                                       
               .mddddddddddddddddddddm+            +dddddddddddNmddddddmNNmdddddmmmddddmmmdddddddddmhoooooooooooooys+dddddd-                     .ddddddddddddddh`                                      
               :mddddddddddddddddddddmy            `/ddddddddmmddddddddNNNdddddddmNNNmddddddddddddddmsooooooooooooosmdddddd+                     `hdddddddddddddms`                                     
               :ddddddddddddddddddddddy              -ydddddmmddddddddmNNdddddddmNNNNmmmmdddddddddddNyoooooooooooooymdddddds                      omdddddddddddddm+                                     
               +ddddddddddddddddddddddm`              `+hdmmddddddddddNNmdddddddNNNNNddddmmmmdddddddmmyysssyyyyyyhhmdddddddy                      -Nddddddddddddddm/                                    
               +ddddddddddddddddddddddN:              `:yddddddddddddmNmddddddddNNNNNddddddddmmmmmdddddmmddmmddddddddddddddNy.                     ddddddddddddddddm:                                   
               yddddddddddddddddddddddmo           `-ohddddddddddddddNNddddddddmNNNNNdddddddddddddmmmmmmdddddddddddddddddmmmdh:                    smdddddddddddddddd.                                  
               ydddddddddddddddddddddddd.          /ddddddddddddddddmNdddddddddmNNNNNddddddddddddddddddddmmmmmmmmmmmmNNNmdddddds.                  /mdddddddddddddddmh`                                 
              `hdddddddddddddddddddddddm+           .sdddddddddddddmNddddddddddmNNNNmdddddddddddddddddmNdddddddddddddmNNmdddddddh/                 .hddddddddddddddddmy`                                
              .dddddddddddddddddddddddddd`            -ydddddddddddNdddddddddddmNNNNmdddddddddddddddddmNmdddddddddddddNNNmddddddddy-                sdddddddddddddddddds`                               
              .hddddddddddddddddddddddddm+             `-yddddddddmddddddddddddmNNNNddddddddddddddddddmNNddddddddddddddNNNmddddddddh+`              /dddddddddddddddddddy`                              
              -ddddddddddddddddddddddddddd-               -ohddddmdddddddddddddmNNNmddddddddddddddddddmNNdddddddddddddddNNmddddddddddy:             .mdddddddddddddddddddy`                             
              :ddddddddddddddddddddddddddds                 `:hmmddddddddddddddmNNNmddddddddddddddddddmNNddddddddddddddddNNmddddddddddds.            dddddddddddddddddddddy`                            
              :dddddddddddddddddddddddddddm:                 /hddddddddddddddddmNNNdddddddddddddddddddmNNmddddddddddddddddNNddddddddddddh/`          ydddddddddddddddddddddy-                           
              :ddddddddddddddddddddddddddddd-               `shddddddddddddddddmNNmdddddddddddddddddddmNNmddddddddddddddddmNNdddddddddddddy:`        +ddddddddddddddddddddddh:                          
              :dddddddddddddddddddddddddddddd`                ./shdddddddddddddmNMddddddddddddddddddddmNNmddddddddddddddddddNmdddddddddddddhy-       :dddddddddddddddddddddddh/                         
              :ddddddddddddddddddddddddddddddy`                 `.:oydddddddddddNNdddddddddddddddddddddNNmdddddddddddddddddddNdddddddddddddddhs-     .hddddddddddddddddddddddddo`                       
              -ddddddddddddddddddddddddddddddms                     `./oydddddddNmdddddddddddddddddddddNNmddddddddddddddddddddNddddddddddddddddhs-   `ydddddddddddddddddddddddddy.                      
              .dddddddddddddddddddddddddddddddm+                        `.:+syhdNddddddddddddddddddddddmNmdddddddddddddddddddddmmddddddddddddddddhy-` oddddddddddddddddddddddddddh:                     
              .ddddddddddddddddddddddddddddddddm:                            `.ydddddddddddddddddddddddmNmddddddddddddddddddddddmmdddddddddddddddddhy/omdddddddddddddddddddddddddddo`                   
              `dddddddddddddddddddddddddddddddddd.                            -ddddddddddddddddddddddddmNmdddddddddddddddddddddddmmdddddddddddddddddddmNddddddddddddddddddddddddddddy-                  
               ydddddddddddddddddddddddddddddddddh-                           `/oyhhddddddddddddddddddddMmddddddddddddddddddddddddmmdddddddddddddddddddNdddddddddddddddddddddddddddddd+`                
            ..`omdddddddddddddddddddddddddddddddddd-                             ``..-:::/+++ossssssssssdmddddddddddddddddddddddddddNddddddddddddddmNhdmmdmmdddddddddddddddddddddddddddh/``.            
           `syyhmmmddddddddddddddddddddddddddddddddd/                                                   yddddddddddddddddddddddddddddhossssyyyyyssoomyyyyyyhhhhhdddddddmdddddddddddddddddyyyo.          
            +yyyyyhdddmmmdddddddddddddddddddddddddddd/                                                  oyhhhddddddddddddddddddddhy+-`    ```````  `yyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyys`         
            -yyyyyyyyyyyhhhddddddmmmdddddddddddddddddds`                                                 ``..---::/++ooooo++/:-..`                  +mdddhhyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyh/         
            `syyyyyyyyyyyyyyyyyyyyyyyhhhhddddddddddddddhsssss-                                                                                      :mddmmmmmmmmddhhhhhyyhyyyyyyyyyyyyyyhhhhddh.        
             -hyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyy.                                                                                     `NmNNNNNNNmmmmmmmddddmmmmdddmmmddmmmmdddddmo        
              ommmmmddhhyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyy`                                                                                     dddmmmmNNNNNNNNNNmmmddddddddddddddddmdmmmmm/       
              .dNNNNNNNNmmdddddhhhhhhhyyyyyyyyyyyyyyyyyyyyyhhhd+                                                                                     hmmddddddddddddddddmmmmmmmdddhhhhhhhhyyyyyyh:      
               oNNNNNNNNNNmmddddddddddddmmdmmmmmmmmmmmddmmddmmdd-                                                                                    sNNNNNNmmmmmmmdddddddddddddhhhhyyyyyhyhhdddmd-     
               :NNNNNNNNNNNNmmddddddddddddddddddddddddddddddddddy`                                                                                   +NNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNmNNNmmmmdddddd/    
               `hdddddmmmmmmNNNmmdddddddddddddddddddddddddddddddmo`                                                                                  :mNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNmmmmmdm+`  
                sdddddddddddddddddddhhhhdddddddddddddddddhhhhhhhhh/                                                                                   -+syyddmmNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNm+  
                sddddddddddddhddddddhhyyyyyyyyyyyyyyyyyyyyyyyyyyyyh/                                                                                       ``.-:///+oooossssyyyyyyyyhyhhhhhhhhyyssso/.  
               `hNNmmmmmmddddddddddddddhhyyyyyyyyyyyyyyyyyyhhhhddddh.                                                                                                                   `` ``           
               .mNNNNNNNNNNNNNNNNmmmmmmmmmmmddddddddddmdddmdddddddddo                                                                                                                                   
               -NNNNNNNNNNNNNNNNNNNNNNNNNNNNNNmmddddddddddddddddddddd/                                                                                                                                  
               `odmmmmmNmNNNNNNNNNNNNNNNNNNNNNNNNmmmdddddddddddddddddh`                                                                                                                                 
                 `..-:://+osyhhhddmmmmmmmmmmmmmmmmmmmmmmddddhhhyyso+/-`                                                                                                                                 
                                  `````.....-------------..``                                                                                                                                           
2013 ~ 2014
Farewell Sanketsu, you were the most bro uniform of all
The best sailor suit a girl could ask for!
*/

#ifndef CS488_VIEWER_HPP
#define CS488_VIEWER_HPP
#include <gtkmm.h>
#include <gtkglmm.h>
#include <vector>
#include <math.h>

class Viewer : public Gtk::GL::DrawingArea{
public:
  bool mouselock, mousewarp;
  int scrX, scrY;
  int scrCX, scrCY;
  float camRX, camRY;
  float camX, camY, camZ;
  float camZoom;

  bool showriv;
  float lightX;
  float lightY;
  float lightZ;

  Viewer();
  virtual ~Viewer();
  bool update();
  void invalidate();
  void keyHandle(GdkEventKey* e);
  void keyHandleup(GdkEventKey* e);

  void init();

  void lighting();
  void lightingNoSpec();
  void lightingShade();
  
protected:
  virtual void on_realize();
  virtual bool on_expose_event(GdkEventExpose* e);
  virtual bool on_configure_event(GdkEventConfigure* e);
  virtual bool on_button_press_event(GdkEventButton* e);
  virtual bool on_button_release_event(GdkEventButton* e);
  virtual bool on_motion_notify_event(GdkEventMotion* e);
  virtual bool on_scroll_event(GdkEventScroll *e);
};

#endif
